
2024-08-02 00:06

Source: #CTF #htb #privesc 

Tags: [[linux]]
#### Enumeration 

nmap tells ssh and http port is open
we try subdomain enum using [[ffuf]] 

```shell
ffuf -u "http://board.htb" -H "Host:FUZZ.board.htb" -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-20000.txt -fs 15949
```

we find a subdomain named `crm` after adding it to `/etc/hosts` file open the subdomain link in new tab  
#### Dolibarr exploit 

a login page is hosted which uses `dolibarr`, we can get an authenticated session by using default creds as `admin : admin`

we use the publicly available exploit to get a rev shell on the machine.
on careful inspection of the config files we find a users pass for a [[database]], we login the db using -
```
mysql -h localhost -P 3306 -u dolibarrowner -p dolibarr
```
we find `bcrypt` encrypted passwords but they won't help
on searching the home directory we find a user, we successfully login as that user via ssh 
#### Privilege Escalation 

```shell
find / -type f -perm -u=s 2>/dev/null
```

using [[find]] command we list all the files that have [[SUID]] bit set
#### Enlightenment Exploit 

here we find a file named `enlightenment_sys` it is window manager for `linux` machines 
after some googling we find an exploit for enlightenment regarding privilege escalation 

the exploit requires you to setup some directories before running it
after setting thing up run the exploit and get the shell
### References
https://www.youtube.com/watch?v=ohuCfi4mQEk

dolibarr exploit - https://github.com/nikn0laty/Exploit-for-Dolibarr-17.0.0-CVE-2023-30253
enlightenment exploit - https://www.exploit-db.com/exploits/51180